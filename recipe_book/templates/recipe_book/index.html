{% extends "base.html" %}
{% load static %}

{% block content %}
{% include 'searchbar.html' %}
<p>Recipes by rating</p>
{% for recipe in recipes_by_rating %}
<p>{{ recipe.title }}</p>
{% endfor %}

<p>Recipes by publication date</p>
{% for recipe in recipes_by_date %}
<p>{{ recipe.title }}</p>
{% endfor %}


{% endblock %}

{% block customscript %}
<script type="text/javascript">
    // Convert Django variables to JavaScript variables
    const userId = '{{ user.id | safe }}';
    // Wait for the DOM to load
    document.addEventListener('DOMContentLoaded', function () {
        // Loop through object_list and add event listeners to each heart button
        '{% for obj in object_list %}'
        // Use index of for loop to attach event listener and pass the recipeId
        document.querySelectorAll('.icon-button')['{{ forloop.counter0 }}'].addEventListener('click', (event) => favouritingBtnListener(event, '{{ obj.id }}'));
        '{% endfor %}'
    });
</script>
<script type="text/javascript" src="{% static 'js/script.js' %}"></script>
{% endblock customscript %}